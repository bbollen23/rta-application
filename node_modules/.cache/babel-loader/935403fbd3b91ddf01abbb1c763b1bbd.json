{"ast":null,"code":"var _jsxFileName = \"/home/bbollen23/rta-application/src/components/percentageCircle.js\";\nimport * as d3 from 'd3';\nimport React, { useState, useEffect } from 'react';\nimport wrap from '../utility/wordWrap';\n\nconst PercentageCircle = props => {\n  const svgId = \"mastery-percentage-\" + props.id;\n\n  const renderCircle = () => {\n    var color = d3.interpolateRdYlGn(2 * props.percentage - 0.8);\n\n    var _outerRadius = (props.size - 25) / 2;\n\n    var _innerRadius = _outerRadius - 7;\n\n    var tau = 2 * Math.PI;\n    var arc = d3.arc().innerRadius(_innerRadius).outerRadius(_outerRadius).startAngle(0);\n    var svg = d3.select(\"#\" + svgId),\n        width = +svg.attr(\"width\"),\n        height = +svg.attr(\"height\"),\n        g = svg.append(\"g\").attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\"); // Add the background arc, from 0 to 100% (tau).\n\n    var background = g.append(\"path\").datum({\n      endAngle: tau\n    }).style(\"fill\", \"#ddd\").attr(\"d\", arc);\n    var foreground = g.append(\"path\").datum({\n      endAngle: 0\n    }).style(\"fill\", color).attr(\"d\", arc);\n    setTimeout(() => {\n      foreground.transition().duration(750).attrTween(\"d\", arcTween(props.percentage * tau));\n    }, 500);\n\n    function arcTween(newAngle) {\n      return function (d) {\n        var interpolate = d3.interpolate(0, newAngle);\n        return function (t) {\n          d.endAngle = interpolate(t);\n          return arc(d);\n        };\n      };\n    }\n\n    var percentageText = svg.append('text').attr('transform', \"translate(\" + width / 2 + \",\" + height / 2 + \")\").text(props.percentage * 100 + '%').attr('class', 'percentage');\n    var belowText = svg.append('text').attr('x', width / 2).attr('y', height / 2 + 40).text('of scholars are above mastery').attr('class', 'belowPercentage').call(wrap, 100); // labels.enter().append('text').attr('x',d=>d.x).attr('y',d=>d.y).attr('text-anchor','middle').text(d=>d.text).attr('fill','grey').attr('font-size','10pt').call(this.wrap,80)\n  };\n\n  useEffect(() => {\n    renderCircle();\n  });\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    id: svgId,\n    width: props.size,\n    height: props.size,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default PercentageCircle;","map":{"version":3,"sources":["/home/bbollen23/rta-application/src/components/percentageCircle.js"],"names":["d3","React","useState","useEffect","wrap","PercentageCircle","props","svgId","id","renderCircle","color","interpolateRdYlGn","percentage","_outerRadius","size","_innerRadius","tau","Math","PI","arc","innerRadius","outerRadius","startAngle","svg","select","width","attr","height","g","append","background","datum","endAngle","style","foreground","setTimeout","transition","duration","attrTween","arcTween","newAngle","d","interpolate","t","percentageText","text","belowText","call"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\nimport React, {useState,useEffect} from 'react';\n\nimport wrap from '../utility/wordWrap';\n\n\nconst PercentageCircle = (props) => {\n  const svgId = \"mastery-percentage-\" + props.id;\n\n\n  const renderCircle = () => {\n    \n  \n    var color = d3.interpolateRdYlGn(2*props.percentage - 0.8);\n\n    var _outerRadius = ((props.size-25)/2);\n    var _innerRadius = _outerRadius - 7;\n\n    var tau = 2 * Math.PI;\n    var arc = d3.arc()\n    .innerRadius(_innerRadius)\n    .outerRadius(_outerRadius)\n    .startAngle(0);\n\n    var svg = d3.select(\"#\"+svgId),\n    width = +svg.attr(\"width\"),\n    height = +svg.attr(\"height\"),\n    g = svg.append(\"g\").attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n\n  // Add the background arc, from 0 to 100% (tau).\n    var background = g.append(\"path\")\n      .datum({endAngle: tau})\n      .style(\"fill\", \"#ddd\")\n      .attr(\"d\", arc);\n\n    var foreground = g.append(\"path\")\n      .datum({endAngle: 0})\n      .style(\"fill\", color)\n      .attr(\"d\", arc);\n\n    setTimeout(()=>{\n    foreground.transition()\n        .duration(750)\n        .attrTween(\"d\", arcTween(props.percentage*tau));\n    },500)\n\n    function arcTween(newAngle){\n      return function(d){\n        var interpolate = d3.interpolate(0,newAngle);\n        return function(t) {\n          d.endAngle=interpolate(t);\n          return arc(d);\n        }\n      }\n    }\n\n    var percentageText = svg.append('text').attr('transform',\"translate(\" + width / 2 + \",\" + height / 2 + \")\").text(props.percentage*100 + '%').attr('class','percentage');\n    var belowText = svg.append('text').attr('x',(width/2)).attr('y',(height/2)+40).text('of scholars are above mastery').attr('class','belowPercentage').call(wrap,100);\n\n  // labels.enter().append('text').attr('x',d=>d.x).attr('y',d=>d.y).attr('text-anchor','middle').text(d=>d.text).attr('fill','grey').attr('font-size','10pt').call(this.wrap,80)\n    \n  }\n\n  useEffect(()=>{\n    renderCircle();\n  })\n\n  return(\n    <svg id={svgId} width={props.size} height={props.size}>\n      {/* <circle r=\"100\" cx=\"125\" cy=\"125\" stroke=\"#6cbdbd\" stroke-width=\"3\" fill=\"white\">\n      </circle> */}\n    </svg>\n  )\n}\n\nexport default PercentageCircle;"]},"metadata":{},"sourceType":"module"}